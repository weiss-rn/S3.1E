<!DOCTYPE html>
<html lang="en">
<head>
    <title>Checkout - Stikom Mart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/dark.css') }}">
    <style>
        body {
            background: #f5f7fb;
            font-family: "Inter", system-ui, -apple-system, sans-serif;
        }

        .card-soft {
            border: 1px solid #e5e7eb;
            border-radius: 14px;
            background: #fff;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-dark shadow-sm py-2">
        <div class="container d-flex justify-content-between">
            <a class="navbar-brand fw-bold fs-5" href="/">Stikom Mart</a>
            <button id="darkModeToggle" class="btn btn-outline-light btn-sm">Dark Mode</button>
        </div>
    </nav>
    <div class="container mt-4 pb-4">
        <div class="text-center mb-4">
            <div class="rounded-circle bg-success text-white d-inline-flex align-items-center justify-content-center" style="width:56px;height:56px;">
                <i class="fas fa-check"></i>
            </div>
            <h5 class="fw-bold mt-2 mb-1">Checkout Berhasil</h5>
            <p class="text-muted small mb-0">Terima kasih telah berbelanja. Berikut detail pesanan Anda:</p>
        </div>

        {% if products %}
            <div class="card-soft p-3 mb-3">
                {% for product in products %}
                    <div class="d-flex justify-content-between align-items-center py-2 border-bottom {% if loop.last %}border-0{% endif %}">
                        <div class="d-flex align-items-center gap-2">
                            <div class="bg-light border rounded" style="width:48px;height:48px; display:flex; align-items:center; justify-content:center;">
                                <i class="fas fa-box text-muted"></i>
                            </div>
                            <div>
                                <div class="fw-semibold small">{{ product.name }}</div>
                                <div class="text-muted small">Rp {{ "%.0f"|format(product.price) }}</div>
                            </div>
                        </div>
                        <span class="badge bg-light text-dark">1 pcs</span>
                    </div>
                {% endfor %}
            </div>
            <div class="card-soft p-3 mb-4">
                <div class="d-flex justify-content-between">
                    <span class="text-muted">Total</span>
                    <strong>Rp {{ products | map(attribute='price') | sum | round(0, 'floor') | int }}</strong>
                </div>
            </div>
        {% else %}
            <div class="alert alert-light text-center">Tidak ada item pada checkout.</div>
        {% endif %}

        <div class="d-grid gap-2">
            <a href="/" class="btn btn-primary">Kembali ke Beranda</a>
        </div>
    </div>
    <script>
        const body = document.body;
        const toggle = document.getElementById("darkModeToggle");

        if (localStorage.getItem("darkMode") === "enabled") {
            enableDarkMode();
        }

        toggle.addEventListener("click", () => {
            if (body.classList.contains("dark-mode")) {
                disableDarkMode();
            } else {
                enableDarkMode();
            }
        });

        function enableDarkMode() {
            body.classList.add("dark-mode");
            document.querySelectorAll(".navbar, .card-soft")
                .forEach(el => el.classList.add("dark-mode"));
            localStorage.setItem("darkMode", "enabled");
            toggle.innerHTML = "Dark";
        }

        function disableDarkMode() {
            body.classList.remove("dark-mode");
            document.querySelectorAll(".navbar, .card-soft")
                .forEach(el => el.classList.remove("dark-mode"));
            localStorage.setItem("darkMode", "disabled");
            toggle.innerHTML = "Light";
        }
    </script>
</body>
</html>
